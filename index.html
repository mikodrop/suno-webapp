<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Suno VibeCraft</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg-color: #0f0f0f;
            --card-bg: #1f1f1f;
            --input-bg: #2a2a2a;
            --text-main: #ffffff;
            --text-secondary: #a0a0a0;
            --accent: #8b5cf6;
            --magic: #eab308; /* –ó–æ–ª–æ—Ç–æ–π —Ü–≤–µ—Ç –¥–ª—è –º–∞–≥–∏–∏ */
        }

        body {
            background-color: var(--bg-color); color: var(--text-main);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0; padding: 16px; padding-bottom: 80px;
        }

        .form-group { margin-bottom: 20px; }
        label { display: block; font-size: 13px; font-weight: 600; color: var(--text-secondary); margin-bottom: 8px; text-transform: uppercase; }
        
        input[type="text"], textarea {
            width: 100%; background-color: var(--input-bg); border: 1px solid transparent;
            border-radius: 10px; padding: 12px; color: var(--text-main); font-size: 15px;
            box-sizing: border-box; outline: none; transition: 0.2s; font-family: inherit;
        }
        input:focus, textarea:focus { border-color: var(--accent); background-color: #333; }
        textarea { resize: vertical; min-height: 80px; }

        /* –¢—É–º–±–ª–µ—Ä—ã */
        .toggle-row {
            display: flex; justify-content: space-between; align-items: center;
            background-color: var(--card-bg); padding: 12px 16px;
            border-radius: 12px; margin-bottom: 15px;
        }
        .toggle-label-text { font-size: 15px; font-weight: 500; }
        
        /* Magic Toggle */
        .magic-row { border: 1px solid #eab30844; background: linear-gradient(45deg, #1f1f1f, #2a2205); }
        .magic-text { color: var(--magic); font-weight: bold; display: flex; align-items: center; gap: 6px; }

        .switch { position: relative; display: inline-block; width: 50px; height: 28px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #444; transition: .3s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 22px; width: 22px; left: 3px; bottom: 3px; background-color: white; transition: .3s; border-radius: 50%; }
        
        /* –¶–≤–µ—Ç–∞ —Å–ª–∞–π–¥–µ—Ä–æ–≤ */
        input:checked + .slider { background-color: var(--accent); }
        input.magic-checkbox:checked + .slider { background-color: var(--magic); }
        input:checked + .slider:before { transform: translateX(22px); }

        /* –ü—Ä–µ—Å–µ—Ç—ã */
        .tabs { display: flex; gap: 8px; overflow-x: auto; padding-bottom: 10px; scrollbar-width: none; }
        .tabs::-webkit-scrollbar { display: none; }
        .tab-btn { background: var(--card-bg); color: var(--text-secondary); border: 1px solid #333; padding: 8px 16px; border-radius: 20px; font-size: 13px; white-space: nowrap; cursor: pointer; transition: 0.2s; }
        .tab-btn.active { background: var(--accent); color: white; border-color: var(--accent); }
        
        .chips-area { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 5px; }
        .chip { background: #2d2d2d; color: #ddd; padding: 8px 14px; border-radius: 8px; font-size: 13px; cursor: pointer; border: 1px solid #3a3a3a; }
        .chip:hover { border-color: var(--accent); color: white; }

        .random-btn { display: inline-flex; align-items: center; gap: 6px; font-size: 12px; color: var(--accent); margin-top: 5px; cursor: pointer; }
    </style>
</head>
<body>

    <div class="form-group">
        <label>Title (–ù–∞–∑–≤–∞–Ω–∏–µ)</label>
        <input type="text" id="title" placeholder="My Hit Song">
    </div>

    <div class="form-group">
        <label>Style of Music (–°—Ç–∏–ª—å / –û–ø–∏—Å–∞–Ω–∏–µ)</label>
        <div class="tabs" id="tabs-container">
            <button class="tab-btn active" onclick="setCategory('trending')">üî• Trends</button>
            <button class="tab-btn" onclick="setCategory('electronic')">üéπ Electro</button>
            <button class="tab-btn" onclick="setCategory('rock')">üé∏ Rock</button>
            <button class="tab-btn" onclick="setCategory('hiphop')">üé§ Rap</button>
        </div>
        <div class="chips-area" id="chips-container"></div>
        <div class="random-btn" onclick="setRandomStyle()">üé≤ –°–ª—É—á–∞–π–Ω—ã–π —Å—Ç–∏–ª—å</div>
        <textarea id="style" rows="2" style="margin-top: 10px;" placeholder="–í—ã–±–µ—Ä–∏ —Å—Ç–∏–ª—å –∏–ª–∏ –Ω–∞–ø–∏—à–∏: '–ì—Ä—É—Å—Ç–Ω–∞—è –ø–µ—Å–Ω—è –ø—Ä–æ –∫–æ—Ç–∞'"></textarea>
    </div>

    <div class="toggle-row magic-row">
        <span class="toggle-label-text magic-text">‚ú® Magic Prompt (–£–ª—É—á—à–∏—Ç—å AI)</span>
        <label class="switch">
            <input type="checkbox" id="magic" class="magic-checkbox">
            <span class="slider"></span>
        </label>
    </div>

    <div class="toggle-row">
        <span class="toggle-label-text">üéª Instrumental (–ë–µ–∑ —Å–ª–æ–≤)</span>
        <label class="switch">
            <input type="checkbox" id="instrumental" onchange="toggleMode()">
            <span class="slider"></span>
        </label>
    </div>

    <div class="form-group" id="lyrics-group">
        <label>Lyrics (–¢–µ–∫—Å—Ç)</label>
        <textarea id="lyrics" rows="5" placeholder="–û—Å—Ç–∞–≤—å –ø—É—Å—Ç—ã–º, –∏ AI –Ω–∞–ø–∏—à–µ—Ç —Ç–µ–∫—Å—Ç —Å–∞–º."></textarea>
    </div>

<script>
    let tg = window.Telegram.WebApp;
    tg.expand();
    tg.MainButton.text = "–°–û–ó–î–ê–¢–¨ –¢–†–ï–ö üöÄ";
    tg.MainButton.color = "#8b5cf6";
    tg.MainButton.show();

    // –ü—Ä–µ—Å–µ—Ç—ã (—Å–æ–∫—Ä–∞—Ç–∏–ª –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞, –æ—Å—Ç–∞–≤—å —Å–≤–æ–∏ –µ—Å–ª–∏ —Ö–æ—á–µ—à—å)
    const presets = {
        'trending': [ {name: 'Drift Phonk üèéÔ∏è', val: 'Aggressive drift phonk, cowbell, distorted bass'}, {name: 'Epic Trailer üé¨', val: 'Cinematic, orchestral, epic build up'} ],
        'electronic': [ {name: 'Cyberpunk ü§ñ', val: 'Cyberpunk, industrial, heavy synth bass'}, {name: 'Techno üî®', val: 'Dark techno, industrial, heavy kick'} ],
        'rock': [ {name: 'Heavy Metal ü§ò', val: 'Heavy metal, aggressive guitar riffs'}, {name: 'Indie Rock üé∏', val: 'Indie rock, upbeat'} ],
        'hiphop': [ {name: 'Trap üî´', val: 'Dark trap, 808 bass, triplets'}, {name: 'Lo-Fi ‚òï', val: 'Lofi hip hop beats, chill, relaxing'} ]
    };

    setCategory('trending');
    function setCategory(cat) {
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');
        const container = document.getElementById('chips-container');
        container.innerHTML = '';
        presets[cat].forEach(p => {
            const c = document.createElement('div'); c.className = 'chip'; c.innerText = p.name;
            c.onclick = () => { document.getElementById('style').value = p.val; if(tg.HapticFeedback) tg.HapticFeedback.impactOccurred('light'); };
            container.appendChild(c);
        });
    }
    function setRandomStyle() { /* ... —Ç–≤–æ–π —Å—Ç–∞—Ä—ã–π –∫–æ–¥ ... */ }
    function toggleMode() {
        const isInst = document.getElementById('instrumental').checked;
        document.getElementById('lyrics-group').style.display = isInst ? 'none' : 'block';
    }

    Telegram.WebApp.onEvent('mainButtonClicked', function(){
        const data = {
            title: document.getElementById('title').value.trim() || "Track",
            style: document.getElementById('style').value.trim(),
            lyrics: document.getElementById('lyrics').value.trim(),
            is_instrumental: document.getElementById('instrumental').checked,
            use_magic: document.getElementById('magic').checked // <--- –û–¢–ü–†–ê–í–õ–Ø–ï–ú –§–õ–ê–ì –ú–ê–ì–ò–ò
        };
        if(!data.style) { tg.showPopup({title:"–û—à–∏–±–∫–∞", message:"–£–∫–∞–∂–∏ —Å—Ç–∏–ª—å!"}); return; }
        tg.sendData(JSON.stringify(data));
    });
</script>
</body>
</html>
