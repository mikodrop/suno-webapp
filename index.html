<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Suno VibeCraft</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg-color: #0f0f0f;
            --card-bg: #1f1f1f;
            --input-bg: #2a2a2a;
            --text-main: #ffffff;
            --text-secondary: #a0a0a0;
            --accent: #8b5cf6; /* Suno Purple */
            --accent-hover: #7c3aed;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 16px;
            box-sizing: border-box;
            padding-bottom: 80px; /* –ú–µ—Å—Ç–æ –ø–æ–¥ –∫–Ω–æ–ø–∫—É */
        }

        /* --- –°—Ç–∏–ª–∏ –ø–æ–ª–µ–π –≤–≤–æ–¥–∞ --- */
        .form-group { margin-bottom: 20px; }
        label {
            display: block; font-size: 13px; font-weight: 600; 
            color: var(--text-secondary); margin-bottom: 8px; 
            text-transform: uppercase; letter-spacing: 0.5px;
        }
        input[type="text"], textarea {
            width: 100%; background-color: var(--input-bg);
            border: 1px solid transparent; border-radius: 10px;
            padding: 12px; color: var(--text-main); font-size: 15px;
            box-sizing: border-box; outline: none; transition: 0.2s;
            font-family: inherit;
        }
        input:focus, textarea:focus {
            border-color: var(--accent); background-color: #333;
        }
        textarea { resize: vertical; min-height: 80px; }

        /* --- –¢—É–º–±–ª–µ—Ä Instrumental --- */
        .toggle-row {
            display: flex; justify-content: space-between; align-items: center;
            background-color: var(--card-bg); padding: 12px 16px;
            border-radius: 12px; margin-bottom: 20px;
        }
        .toggle-label-text { font-size: 16px; font-weight: 500; }
        .switch { position: relative; display: inline-block; width: 50px; height: 28px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
            background-color: #444; transition: .3s; border-radius: 34px;
        }
        .slider:before {
            position: absolute; content: ""; height: 22px; width: 22px; left: 3px; bottom: 3px;
            background-color: white; transition: .3s; border-radius: 50%;
        }
        input:checked + .slider { background-color: var(--accent); }
        input:checked + .slider:before { transform: translateX(22px); }

        /* --- –ü–†–ï–°–ï–¢–´ (–ö–†–ê–°–û–¢–ê) --- */
        .presets-container { margin-bottom: 15px; }
        
        /* –¢–∞–±—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π */
        .tabs {
            display: flex; gap: 8px; overflow-x: auto; padding-bottom: 10px;
            scrollbar-width: none; /* Firefox */
        }
        .tabs::-webkit-scrollbar { display: none; } /* Chrome */
        
        .tab-btn {
            background: var(--card-bg); color: var(--text-secondary);
            border: 1px solid #333; padding: 8px 16px; border-radius: 20px;
            font-size: 13px; font-weight: 600; white-space: nowrap; cursor: pointer;
            transition: 0.2s;
        }
        .tab-btn.active {
            background: var(--accent); color: white; border-color: var(--accent);
        }

        /* –û–±–ª–∞—Å—Ç—å —á–∏–ø—Å–æ–≤ */
        .chips-area {
            display: flex; flex-wrap: wrap; gap: 8px; margin-top: 5px;
            min-height: 40px;
        }
        .chip {
            background: #2d2d2d; color: #ddd; padding: 8px 14px;
            border-radius: 8px; font-size: 13px; cursor: pointer;
            border: 1px solid #3a3a3a; transition: 0.2s; user-select: none;
        }
        .chip:active { transform: scale(0.95); }
        .chip:hover { border-color: var(--accent); color: white; }

        /* –ö–Ω–æ–ø–∫–∞ –†–∞–Ω–¥–æ–º */
        .random-btn {
            display: inline-flex; align-items: center; gap: 6px;
            font-size: 12px; color: var(--accent); margin-top: 5px; cursor: pointer;
        }

    </style>
</head>
<body>

    <div class="form-group">
        <label>Title (–ù–∞–∑–≤–∞–Ω–∏–µ)</label>
        <input type="text" id="title" placeholder="My Hit Song">
    </div>

    <div class="form-group">
        <label>Style of Music (–°—Ç–∏–ª—å)</label>
        
        <div class="presets-container">
            <div class="tabs" id="tabs-container">
                <button class="tab-btn active" onclick="setCategory('trending')">üî• Trends</button>
                <button class="tab-btn" onclick="setCategory('electronic')">üéπ Electro</button>
                <button class="tab-btn" onclick="setCategory('rock')">üé∏ Rock</button>
                <button class="tab-btn" onclick="setCategory('hiphop')">üé§ Rap</button>
                <button class="tab-btn" onclick="setCategory('chill')">‚òÅÔ∏è Chill</button>
            </div>
            
            <div class="chips-area" id="chips-container"></div>
            
            <div class="random-btn" onclick="setRandomStyle()">
                üé≤ –ú–Ω–µ –ø–æ–≤–µ–∑–µ—Ç (–°–ª—É—á–∞–π–Ω—ã–π —Å—Ç–∏–ª—å)
            </div>
        </div>

        <textarea id="style" rows="2" placeholder="–ù–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –≤—ã—à–µ –∏–ª–∏ –Ω–∞–ø–∏—à–∏ —Å–∞–º..."></textarea>
    </div>

    <div class="toggle-row">
        <span class="toggle-label-text">üéª Instrumental (–ë–µ–∑ —Å–ª–æ–≤)</span>
        <label class="switch">
            <input type="checkbox" id="instrumental" onchange="toggleMode()">
            <span class="slider"></span>
        </label>
    </div>

    <div class="form-group" id="lyrics-group">
        <label>Lyrics (–¢–µ–∫—Å—Ç)</label>
        <textarea id="lyrics" rows="5" placeholder="–û—Å—Ç–∞–≤—å –ø—É—Å—Ç—ã–º, —á—Ç–æ–±—ã AI –ø—Ä–∏–¥—É–º–∞–ª —Ç–µ–∫—Å—Ç —Å–∞–º.&#10;–ò–ª–∏ –≤—Å—Ç–∞–≤—å —Å–≤–æ–∏ —Å—Ç–∏—Ö–∏."></textarea>
    </div>

<script>
    let tg = window.Telegram.WebApp;
    tg.expand();
    tg.MainButton.text = "–°–û–ó–î–ê–¢–¨ –¢–†–ï–ö üöÄ";
    tg.MainButton.color = "#8b5cf6";
    tg.MainButton.show();

    // === –ë–ê–ó–ê –î–ê–ù–ù–´–• –ü–†–ï–°–ï–¢–û–í ===
    const presets = {
        'trending': [
            { name: 'Drift Phonk üèéÔ∏è', val: 'Aggressive drift phonk, cowbell, distorted bass, high bpm' },
            { name: 'Epic Trailer üé¨', val: 'Cinematic, orchestral, epic build up, heroic, trailer music' },
            { name: 'Russian Doomer üè¢', val: 'Russian post-punk, dark wave, melancholic, deep male vocals, reverb guitar' },
            { name: 'Hyperpop ‚ú®', val: 'Hyperpop, glitchcore, auto-tune, high pitched vocals, energetic' }
        ],
        'electronic': [
            { name: 'Cyberpunk ü§ñ', val: 'Cyberpunk, industrial, heavy synth bass, futuristic' },
            { name: 'Techno üî®', val: 'Dark techno, industrial, repetitive, heavy kick, 130 bpm' },
            { name: 'Synthwave üåÜ', val: '80s synthwave, retro, neon, analog synths, driving beat' },
            { name: 'DnB ü•Å', val: 'Liquid drum and bass, atmospheric, fast breakbeats, soulful vocals' }
        ],
        'rock': [
            { name: 'Heavy Metal ü§ò', val: 'Heavy metal, aggressive guitar riffs, powerful drums, screaming vocals' },
            { name: 'Indie Rock üé∏', val: 'Indie rock, upbeat, british rock, catchy guitar hook' },
            { name: 'Grunge üß•', val: '90s grunge, distorted guitar, angst, heavy drums, nirvana style' },
            { name: 'Pop Punk üõπ', val: '2000s pop punk, energetic, catchy chorus, fast tempo' }
        ],
        'hiphop': [
            { name: 'Trap üî´', val: 'Dark trap, 808 bass, triplets hi-hats, auto-tune rap' },
            { name: 'Old School üß¢', val: '90s boom bap, hip hop, vinyl crackle, jazz samples, flow' },
            { name: 'Lo-Fi Rap ‚òï', val: 'Lofi hip hop, chill beats, spoken word, relaxing' },
            { name: 'Drill üá¨üáß', val: 'UK drill, sliding 808s, dark piano, aggressive flow' }
        ],
        'chill': [
            { name: 'Lofi Study üìö', val: 'Lofi hip hop beats to study to, chill, relaxing, vinyl static, piano' },
            { name: 'Ambient üåå', val: 'Ambient, atmospheric, space, ethereal, meditation, no drums' },
            { name: 'Jazz Cafe üé∑', val: 'Smooth jazz, saxophone, piano, coffee shop atmosphere' },
            { name: 'Acoustic üèïÔ∏è', val: 'Acoustic guitar, folk, campfire, warm, male vocals' }
        ]
    };

    // === –õ–û–ì–ò–ö–ê –ò–ù–¢–ï–†–§–ï–ô–°–ê ===
    
    // 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (–∑–∞–≥—Ä—É–∂–∞–µ–º —Ç—Ä–µ–Ω–¥—ã)
    setCategory('trending');

    // 2. –°–º–µ–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    function setCategory(cat) {
        // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Ç–∞–±–æ–≤
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active'); // –¢–æ—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–∂–∞–ª–∏

        // –†–µ–Ω–¥–µ—Ä —á–∏–ø—Å–æ–≤
        const container = document.getElementById('chips-container');
        container.innerHTML = ''; // –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ
        
        presets[cat].forEach(preset => {
            const chip = document.createElement('div');
            chip.className = 'chip';
            chip.innerText = preset.name;
            chip.onclick = () => {
                // –ê–Ω–∏–º–∞—Ü–∏—è –Ω–∞–∂–∞—Ç–∏—è
                chip.style.transform = 'scale(0.9)';
                setTimeout(() => chip.style.transform = 'scale(1)', 100);
                
                // –í—Å—Ç–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞
                document.getElementById('style').value = preset.val;
                
                // –í–∏–±—Ä–æ–æ—Ç–∫–ª–∏–∫ (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
                if(tg.HapticFeedback) tg.HapticFeedback.impactOccurred('light');
            };
            container.appendChild(chip);
        });
    }

    // 3. –°–ª—É—á–∞–π–Ω—ã–π —Å—Ç–∏–ª—å
    function setRandomStyle() {
        const categories = Object.keys(presets);
        const randCat = categories[Math.floor(Math.random() * categories.length)];
        const items = presets[randCat];
        const randItem = items[Math.floor(Math.random() * items.length)];
        
        document.getElementById('style').value = randItem.val;
        if(tg.HapticFeedback) tg.HapticFeedback.notificationOccurred('success');
    }

    // 4. –¢—É–º–±–ª–µ—Ä –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª
    function toggleMode() {
        const isInst = document.getElementById('instrumental').checked;
        const lyricsGroup = document.getElementById('lyrics-group');
        lyricsGroup.style.display = isInst ? 'none' : 'block';
    }

    // 5. –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç—É
    Telegram.WebApp.onEvent('mainButtonClicked', function(){
        const isInst = document.getElementById('instrumental').checked;
        const lyrics = document.getElementById('lyrics').value.trim();
        const style = document.getElementById('style').value.trim();
        const title = document.getElementById('title').value.trim();

        if (!style) {
            tg.showPopup({title: "–û–π!", message: "–í—ã–±–µ—Ä–∏ —Å—Ç–∏–ª—å –º—É–∑—ã–∫–∏ –∏–ª–∏ –Ω–∞–ø–∏—à–∏ —Å–≤–æ–π!"});
            return;
        }

        const data = {
            title: title || "VibeCraft Track",
            style: style,
            lyrics: lyrics,
            is_instrumental: isInst
        };

        tg.sendData(JSON.stringify(data));
    });

</script>
</body>
</html>
